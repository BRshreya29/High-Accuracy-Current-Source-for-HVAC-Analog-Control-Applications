Version 4
SHEET 1 1980 680
WIRE 560 -224 208 -224
WIRE 688 -224 640 -224
WIRE 208 -208 208 -224
WIRE 208 -208 48 -208
WIRE 336 -16 336 -96
WIRE 208 0 208 -208
WIRE 304 0 208 0
WIRE 688 16 688 -224
WIRE 688 16 368 16
WIRE 304 32 208 32
WIRE -80 48 -288 48
WIRE 80 48 0 48
WIRE 208 48 208 32
WIRE 208 48 80 48
WIRE 80 112 80 48
WIRE -288 128 -288 48
WIRE 336 144 336 48
FLAG -288 208 0
FLAG 336 224 0
FLAG 336 -176 0
FLAG 80 176 0
FLAG -32 -208 0
SYMBOL voltage -288 112 R0
WINDOW 3 -153 130 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3.3 0 1n 1n 1000u 1000u)
SYMATTR InstName V_control
SYMBOL voltage 336 -80 R180
WINDOW 0 -208 62 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Power_Supply
SYMATTR Value 5
SYMBOL voltage 336 128 R0
WINDOW 0 39 50 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Power_Supply_0
SYMATTR Value 0
SYMBOL res 16 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {wc(10000,tolr,1)} tc=0.0001
SYMATTR SpiceLine tol=1
SYMBOL polcap 64 112 R0
WINDOW 3 24 56 Left 2
SYMATTR Value {wc(15µ,tolc,2)}
SYMATTR InstName C1
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=4 Irms=560m Rser=0.2 Lser=0
SYMBOL res 64 -224 R90
WINDOW 0 -15 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_sense
SYMATTR Value {wc(3300,tolrsense,0)} tc=0.0001
SYMATTR SpiceLine tol=0.1
SYMBOL res 656 -240 R90
WINDOW 0 -13 50 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rload
SYMATTR Value 500
SYMBOL OpAmps\\AD8574 336 -48 R0
SYMATTR InstName U2
TEXT 816 -376 Left 2 !.tran 4s
TEXT 816 -288 Left 2 !.param tolr 0.01\n.param tolrsense 0.001\n.param tolc 0.15\n.param numruns 8
TEXT 816 -312 Left 2 !.step param run 0 7 1
TEXT 816 208 Left 2 !.meas TRAN V_rload AVG V(N002) - V(N001) FROM 3 TO 4\n.meas TRAN Iload AVG I(Rload) FROM 3 TO 4\n.meas TRAN R_load_calc PARAM V_rload / Iload
TEXT 816 120 Left 2 !.meas TRAN V_rsense AVG V(n001) FROM 3 TO 4\n.meas TRAN I_rsense AVG I(R_sense) FROM 3 TO 4\n.meas TRAN R_sense_calc PARAM V_rsense / I_rsense
TEXT 816 -136 Left 2 !.temp -40 27 85
TEXT 816 40 Left 2 !.func wc(nom,tol,index) if(run==numruns,nom,if(binary(run,index),nom*(1+tol),nom*(1-tol)))
TEXT 816 8 Left 2 !.func binary(run,index) floor(run/(2**index))-2*floor(run/(2**(index+1)))
TEXT 216 -392 Left 2 ;Constant Current Source across Rload
TEXT 816 -80 Left 2 ;Use:\n1. wc for Worst Case analysis\n2. mc for Monte Carlo analysis
TEXT 816 88 Left 2 ;Commands for Measurements:
